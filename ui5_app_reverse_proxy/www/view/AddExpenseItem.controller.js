jQuery.sap.require("linklaters.com.customexpensesapp.util.Formatter");jQuery.sap.require("linklaters.com.customexpensesapp.util.Controller");linklaters.com.customexpensesapp.util.Controller.extend("linklaters.com.customexpensesapp.view.AddExpenseItem", {    initializeNewExpenseItemData: function() {		this.getView().getModel("newExpenseItem").setData({			Detail: {							}		});	},onInit : function() {addExpenseItemController = this;		this.getView().setModel(new sap.ui.model.json.JSONModel(), "newExpenseItem");		this.initializeNewExpenseItemData ();this.getView().addEventDelegate({			onBeforeShow : function(evt) {				addExpenseItemController.onBeforeShow(evt);			}		});	},showErrorAlert : function(sMessage) {		jQuery.sap.require("sap.m.MessageBox");		sap.m.MessageBox.alert(sMessage);	},onBeforeShow : function(oEvent){                   this.getView().setModel(sap.ui.getCore().getModel("employeeModel"), "employeeModel");    },                 onSave: function() {		var oNewItem = this.getView().getModel("newExpenseItem").getData();		var sClient = oNewItem.Detail.Client;		var sType = this.getView().byId("idSelectType").getSelectedItem().getText();		var sAmount = oNewItem.Detail.Amount;		var sLocation = oNewItem.Detail.Location;		var sDate = oNewItem.Detail.Date;		var sDescription = oNewItem.Detail.Description;		var oEmployeeModel = sap.ui.getCore().getModel("employeeModel");		var sMonth = oEmployeeModel.getData().ExpenseMonth;		var sYear = oEmployeeModel.getData().ExpenseYear;		var oDate = new Date(sDate);					var oPayload = {            "EmployeeNumber" : "",            "ExpenseYear" : sYear.toString(),            "ExpenseMonth" : sMonth.toString(),            "ItemNo" : -1,            "ItemDate" : "\\/Date(" + oDate.getTime() + ")\\/",            "ExpenseType" : sType,            "Description" : sDescription,            "Amount" : sAmount,            "Currency" : "GBP",            "Location" : sLocation,            "Client" : sClient		};		var that = this;		this.getView().getModel().create("/MyExpenseItemSet", oPayload, {			success: function(oResponse) {				sap.m.MessageToast.show("Successfully created new Expense Item.", {    			duration: 2000    		});				that.onCancel();			},			error: function(oError) {				alert("Error");			}		});	},onCancel : function() {		sap.ui.core.UIComponent.getRouterFor(this).backWithoutHash(this.getView());	}});